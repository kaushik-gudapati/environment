n == to_dec(to_neg_bin(n))
test(200)
test(202333334240)
test(202333334241234120)
test(20233333424123120)
test(202333334241231290)
test(202333241231290)
[1, 2, 3].last
to_neg_bin(2023333342412341230)
2023333342412341230 / 2
2023333342412341230 / -2
2023333342412341230 / -2.0
(2023333342412341230 / -2.0).ceil
(2023333342412341230 / -2.0).ceil * (-2)
5 / -2
6 / -2
(6 / -2.0).ceil
(5 / -2.0).ceil
5 / 2
f = 9
f = -f
f
load("~/neg.rb")
5.divmod(2)
test(2023333342412341230)
def test_2
def test_2(n)
n == to_dec(to_neg_bin_2(n))
test_2(19919324)
19.divmod(-2)
190.divmod(-2)
191.divmod(-2)
test_2(1994)
test_2(199489759865)
test_2(19948975987665)
test_2(199489759876165)
test_2(1994897598763165)
test_2(1994897598111763165)
test_2(2023333342412341230)
test_2(5023333342412341230)
test_2(502333334200012341230)
test_2(502333334200012341997661230)
test_2(502333334200012965967341997661230)
test_2(50233333420001296865765465845967341997661230)
test_2(50233333420001296865765465845967341900989089097661230)
test_2(50233333420001296865765465845967341900989089090980980980987661230)
test_2(5023333342000129686576546584596734190098908909098087867845634758568980980987661230)
test_2(502333334200012968657654658459673419008654865486548656558548698908909098087867845634758568980980987661230)
test_2(502333334200012965454376546567453656768657654658459673419008654865486548656558548698908909098087867845634758568980980987661230)
test_2(502333334200012965454376546567453656768657654658459673419008654865486548656558548698908909098087867847453456323464758568980980987661230)
to_neg_bin_2(502333334200012965454376546567453656768657654658459673419008654865486548656558548698908909098087867847453456323464758568980980987661230)
to_dec([0, 1, 0, 0, 1, 1, 1, 1, 0, 0, 1, 1, 1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 1, 1, 1, 1, 0, 0, 1, 0, 1, 1, 0, 1, 0, 0, 0, 1, 0, 1, 1, 1, 0, 0, 1, 0, 0, 0, 1, 1, 0, 1, 1, 0, 1, 1, 1, 0, 1, 1, 1, 1, 1, 0, 1, 1, 0, 0, 0, 0, 1, 0, 1, 0, 1, 0, 0, 0, 1, 1, 0, 1, 0, 1, 1, 1, 1, 1, 0, 1, 0, 0, 0, 1, 1, 0, 0, 1, 0, 0, 1, 0, 1, 1, 1, 0, 0, 0, 1, 1, 0, 1, 0, 1, 1, 0, 0, 0, 0, 0, 1, 0, 1, 0, 0, 0, 1, 0, 0, 1, 0, 0, 1, 0, 0, 0, 0, 0, 1, 1, 1, 0, 0, 0, 1, 1, 1, 0, 1, 0, 1, 1, 1, 0, 1, 1, 0, 1, 1, 1, 1, 1, 0, 0, 1, 0, 0, 0, 1, 1, 1, 0, 0, 0, 1, 0, 0, 1, 1, 1, 0, 1, 0, 1, 1, 0, 1, 1, 0, 1, 0, 1, 0, 1, 1, 1, 0, 0, 1, 0, 1, 0, 1, 1, 1, 0, 0, 0, 1, 0, 1, 0, 0, 0, 0, 0, 1, 0, 1, 1, 0, 1, 0, 0, 1, 0, 0, 0, 0, 1, 1, 0, 0, 1, 1, 1, 1, 1, 1, 1, 0, 1, 0, 1, 1, 0, 1, 0, 0, 1, 0, 1, 1, 0, 0, 1, 1, 1, 0, 0, 1, 1, 0, 0, 0, 1, 0, 1, 1, 0, 1, 1, 1, 1, 0, 1, 0, 0, 1, 1, 1, 0, 0, 1, 1, 0, 1, 1, 0, 0, 0, 0, 0, 1, 0, 1, 0, 0, 1, 0, 1, 0, 0, 0, 1, 0, 1, 0, 1, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 0, 1, 0, 0, 0, 0, 0, 1, 0, 1, 1, 1, 1, 1, 1, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 1, 1, 0, 0, 1, 1, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 0, 1, 1, 0, 0, 0, 0, 0, 0, 1, 1, 0, 1, 0, 1, 0, 1, 0, 1, 1, 1, 1, 1, 1, 0, 1, 1, 1, 0, 1, 0, 0, 0, 1, 1, 1, 0, 1, 1, 0, 1, 1, 0, 1, 1, 1, 0, 0, 1, 0, 1, 0, 1, 0, 1, 0, 1, 1, 1, 1, 1, 1, 0, 1, 0, 1, 0, 1, 1, 1, 1, 0, 0, 1, 0, 0, 0, 1, 1, 1, 1, 1] )
[0, 1, 0, 0, 1, 1, 1, 1, 0, 0, 1, 1, 1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 1, 1, 1, 1, 0, 0, 1, 0, 1, 1, 0, 1, 0, 0, 0, 1, 0, 1, 1, 1, 0, 0, 1, 0, 0, 0, 1, 1, 0, 1, 1, 0, 1, 1, 1, 0, 1, 1, 1, 1, 1, 0, 1, 1, 0, 0, 0, 0, 1, 0, 1, 0, 1, 0, 0, 0, 1, 1, 0, 1, 0, 1, 1, 1, 1, 1, 0, 1, 0, 0, 0, 1, 1, 0, 0, 1, 0, 0, 1, 0, 1, 1, 1, 0, 0, 0, 1, 1, 0, 1, 0, 1, 1, 0, 0, 0, 0, 0, 1, 0, 1, 0, 0, 0, 1, 0, 0, 1, 0, 0, 1, 0, 0, 0, 0, 0, 1, 1, 1, 0, 0, 0, 1, 1, 1, 0, 1, 0, 1, 1, 1, 0, 1, 1, 0, 1, 1, 1, 1, 1, 0, 0, 1, 0, 0, 0, 1, 1, 1, 0, 0, 0, 1, 0, 0, 1, 1, 1, 0, 1, 0, 1, 1, 0, 1, 1, 0, 1, 0, 1, 0, 1, 1, 1, 0, 0, 1, 0, 1, 0, 1, 1, 1, 0, 0, 0, 1, 0, 1, 0, 0, 0, 0, 0, 1, 0, 1, 1, 0, 1, 0, 0, 1, 0, 0, 0, 0, 1, 1, 0, 0, 1, 1, 1, 1, 1, 1, 1, 0, 1, 0, 1, 1, 0, 1, 0, 0, 1, 0, 1, 1, 0, 0, 1, 1, 1, 0, 0, 1, 1, 0, 0, 0, 1, 0, 1, 1, 0, 1, 1, 1, 1, 0, 1, 0, 0, 1, 1, 1, 0, 0, 1, 1, 0, 1, 1, 0, 0, 0, 0, 0, 1, 0, 1, 0, 0, 1, 0, 1, 0, 0, 0, 1, 0, 1, 0, 1, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 0, 1, 0, 0, 0, 0, 0, 1, 0, 1, 1, 1, 1, 1, 1, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 1, 1, 0, 0, 1, 1, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 0, 1, 1, 0, 0, 0, 0, 0, 0, 1, 1, 0, 1, 0, 1, 0, 1, 0, 1, 1, 1, 1, 1, 1, 0, 1, 1, 1, 0, 1, 0, 0, 0, 1, 1, 1, 0, 1, 1, 0, 1, 1, 0, 1, 1, 1, 0, 0, 1, 0, 1, 0, 1, 0, 1, 0, 1, 1, 1, 1, 1, 1, 0, 1, 0, 1, 0, 1, 1, 1, 1, 0, 0, 1, 0, 0, 0, 1, 1, 1, 1, 1] .length
[0, 1, 0, 0, 1, 1, 1, 1, 0, 0, 1, 1, 1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 1, 1, 1, 1, 0, 0, 1, 0, 1, 1, 0, 1, 0, 0, 0, 1, 0, 1, 1, 1, 0, 0, 1, 0, 0, 0, 1, 1, 0, 1, 1, 0, 1, 1, 1, 0, 1, 1, 1, 1, 1, 0, 1, 1, 0, 0, 0, 0, 1, 0, 1, 0, 1, 0, 0, 0, 1, 1, 0, 1, 0, 1, 1, 1, 1, 1, 0, 1, 0, 0, 0, 1, 1, 0, 0, 1, 0, 0, 1, 0, 1, 1, 1, 0, 0, 0, 1, 1, 0, 1, 0, 1, 1, 0, 0, 0, 0, 0, 1, 0, 1, 0, 0, 0, 1, 0, 0, 1, 0, 0, 1, 0, 0, 0, 0, 0, 1, 1, 1, 0, 0, 0, 1, 1, 1, 0, 1, 0, 1, 1, 1, 0, 1, 1, 0, 1, 1, 1, 1, 1, 0, 0, 1, 0, 0, 0, 1, 1, 1, 0, 0, 0, 1, 0, 0, 1, 1, 1, 0, 1, 0, 1, 1, 0, 1, 1, 0, 1, 0, 1, 0, 1, 1, 1, 0, 0, 1, 0, 1, 0, 1, 1, 1, 0, 0, 0, 1, 0, 1, 0, 0, 0, 0, 0, 1, 0, 1, 1, 0, 1, 0, 0, 1, 0, 0, 0, 0, 1, 1, 0, 0, 1, 1, 1, 1, 1, 1, 1, 0, 1, 0, 1, 1, 0, 1, 0, 0, 1, 0, 1, 1, 0, 0, 1, 1, 1, 0, 0, 1, 1, 0, 0, 0, 1, 0, 1, 1, 0, 1, 1, 1, 1, 0, 1, 0, 0, 1, 1, 1, 0, 0, 1, 1, 0, 1, 1, 0, 0, 0, 0, 0, 1, 0, 1, 0, 0, 1, 0, 1, 0, 0, 0, 1, 0, 1, 0, 1, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 0, 1, 0, 0, 0, 0, 0, 1, 0, 1, 1, 1, 1, 1, 1, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 1, 1, 0, 0, 1, 1, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 0, 1, 1, 0, 0, 0, 0, 0, 0, 1, 1, 0, 1, 0, 1, 0, 1, 0, 1, 1, 1, 1, 1, 1, 0, 1, 1, 1, 0, 1, 0, 0, 0, 1, 1, 1, 0, 1, 1, 0, 1, 1, 0, 1, 1, 1, 0, 0, 1, 0, 1, 0, 1, 0, 1, 0, 1, 1, 1, 1, 1, 1, 0, 1, 0, 1, 0, 1, 1, 1, 1, 0, 0, 1, 0, 0, 0, 1, 1, 1, 1, 1].length
to_bin([1] * 5)
to_dec([1] * 5)
to_dec([1] * 5000)
to_dec([1] * 50000)
test_2(to_dec([1] * 50000))
test_2(to_dec([1] * 60000))
test_2(to_dec([1] * 70000))
test_2(to_dec([1] * 80000))
test_2(to_dec([1] * 90000))
test_2(to_dec([1] * 100000))
def to_negative_binary(dec)
  bin = []
  while dec != 0
    dec, rem = dec.divmod(-2)
    bin << rem.abs
    dec += 1 if rem < 0
  bin
def to_dec(bin)
  acc = 0
  pow = 1
  bin.each do |b|
    acc += b * pow
    pow *= (-2)
  end
  acc
n == to_negative_binary(to_dec(n))
n == to_dec(to_negative_binary(n))
test(12039847102984712098347129381648732623487563487056187046102783612308756107856140785653478543278065103478567843156234978563478561978345987436574865873465374286592783465987346597832659783246587236478563475673465437564764747474744747476547564764756746287946598723465239875629387465298734659287346529873465647389247836086734346876780345780634467485634875629576439876528976593478629746597234659782364987523659872346598723465987346578234654765475674657465746574657456476574654738833838382987456289756298734659287356928734654735674465764726457896405584172901373621563707611699680112273319202141127331534328998309315056210402560939331256957997879571139136179511121448775262486019908026423019039688046854373174657373632851703119051279026419107758569875282215161854743720579155798078486750961020411395097756227176881672844716161636449725427920674579561409597112717354202670575410505608728782055378030623519245847255667445548467506119400811243372157137949154137079958149193307545988240936720568602823532949193355168436494194016826121591222370620859456977599701001374255486475464108223069190827844930652325408019213785398305781900377870031900378782587913725525573441347503464272674326580740316208704050278206156660047709460927860366793361910964013520026258657539507953329955976397066267904808300431313623397955968407729794888343069433634095272069350920957667826969437327602441516020706713336937711650625037056871417074665876046505871241635040616712597763255092654974539304295453689442298728054009703910860443578074795404170879822383494912734634296987402716542064983833788642271450714175858015489813032135602480535469560840014309421176257240642433673832174448181833301847932298181488687281531665054082874506203203313646642062487228303020587127931879648930263226577039494253982651256080222355501371693369246925954095308084358160005285240988425103529371394900720984197794268815864570304777140343729078411226594282389534586806950802034979480161910487938990224672698324501769784120507575384945369454084135888222976253016543455990984840101696957686843030260341965568142769717615063193962344730019583577484155296573549010756428544019225065830802565097428445493176861432751691495589897918063471685455019431985639014265602117040901131129551310264609022927342666519043939797922649870960698592325531611803746773359268557154509975801115210684583278535145537885779957169420684882539540076859756357807600032848487977236056721302922419646093121505913683276718189655544164557519372345655829135686986784665940797670697600310379578601687211329220172953339147075932605413641030510101843385416845438264204746257227019949616938117895871517019110046731154224706114669582893263814802988127882036045806669189025630780879044935962902107679266402790084064349501521003711391824826503997123364835107162074570651605336123961305538460300195840180327014825486510173574206830663895034219860292702372579983890100258042270946275034260232625226032195442735970499369951096760421018986695511313659751430035205967292442563019870048425315409650772199964288323233804251372968349645526874035300084888388980451460282874227712897388781760475504087993930570852713970838120551400347793383806904510575003577852555853365395851112465607732586984352852057436462323965783388746845871152060715189980321289071245620997814496804508120543031316546407117637748834602346053237385153110063045060461042825979686526135347486230427603886704416475168765771993352254727883298567135164765157063157002757942439051017387915578289915082232649531700575048929427993714174061343931837141204296203139047137120346488211859005789737570390444108175830957816225906942935246374697083621923632814390331802103966407506807)
test(12039847102984712098347129381648732623487563487056187046102783612308756107856140785653478543278065103478567843156234978563478561978345987436574865873465374286592783465987346597832659783246587236478563475673465437564764747474744747476547564764756746287946598723465239875629387465298734659287346529873465647389247836086734346876780345780634467485634875629576439876528976593478629746597234659782364987523659872346598723465987346578234654765475674657465746574657456476574654738833838382987456289756298734659287356928734654735674465764726457896405584172901373621563707611699680112273319202141127331534328998309315056210402560939331256957997879571139136179511121448775262486019908026423019039688046854373174657373632851703119051279026419107758569875282215161854743720579155798078486750961020411395097756227176881672844716161636449725427920674579561409597112717354202670575410505608728782055378030623519245847255667445548467506119400811243372157137949154137079958149193307545988240936720568602823532949193355168436494194016826121591222370620859456977599701001374255486475464108223069190827844930652325408019213785398305781900377870031900378782587913725525573441347503464272674326580740316208704050278206156660047709460927860366793361910964013520026258657539507953329955976397066267904808300431313623397955968407729794888343069433634095272069350920957667826969437327602441516020706713336937711650625037056871417074665876046505871241635040616712597763255092654974539304295453689442298728054009703910860443578074795404170879822383494912734634296987402716542064983833788642271450714175858015489813032135602480535469560840014309421176257240642433673832174448181833301847932298181488687281531665054082874506203203313646642062487228303020587127931879648930263226577039494253982651256080222355501371693369246925954095308084358160005285240988425103529371394900720984197794268815864570304777140343729078411226594282389534586806950802034979480161910487938990224672698324501769784120507575384945369454084135888222976253016543455990984840101696957686843030260341965568142769717615063193962344730019583577484155296573549010756428544019225065830802565097428445493176861432751691495589897918063471685455019431985639014265602117040901131129551310264609022927342666519043939797922649870960698592325531611803746773359268557154509975801115210684583278535145537885779957169420684882539540076859756357807600032848487977236056721302922419646093121505913683276718189655544164557519372345655829135686986784665940797670697600310379578601687211329220172953339147075932605413641030510101843385416845438264204746257227019949616938117895871517019110046731154224706114669582893263814802988127882036045806669189025630780879044935962902107679266402790084064349501521003711391824826503997123364835107162074570651605336123961305538460300195840180327014825486510173574206830663895034219860292702372579983890100258042270946275034260232625226032195442735970499369951096760421018986695511313659751430035205967292442563019870048425315409650772199964288323233804251372968349645526874035300084888388980451460282874227712897388781760475504087993930570852713970838120551400347793383806904510575003577852555853365395851112465607732586984352852057436462323965783388746845871152060715189980321289071245620997814496804508120543031316546407117637748834602346053237385153110063045060461042825979686526135347486230427603886704416475168765771993352254727883298567135164765157063157002757942439051017387915578289915082232649531700575048929427993714174061343931837141204296203139047137120346488211859005789737570390444108175830957816225906942935246374697083621923632814390331802103966407506807019126320466620113119680497975143515502643713136991763216459067940501894150417162615643377233902102737817080135673720776036569138859639279218936775160016297282674552981674189728315708881357471592162085651164941381961458634485512342751399742530856306030866623073001720122108682882615514867396340702862126173301236279158232065075194236836774761751689291117708256136280778692826480831322251589267464633601490378256519798419854858806669503969999318135171582910778040511151856973226004664456083358061327097738545037359874915607155241487273169834350221926958009703599793939412546596091254424724858239845051523862366941956045389498884955353972714984481949639119354926376542308211372868525564425385305017376974396391282537280822839998765880616501473119681789561892735950143565853404344079270580624988037609971390827434035118855057113499924356581270650654002721064748344109551217850314208726859197796783139098369775608408115379023121931534239916436030475742257919106018898059713224625789423016133289908759200266841994128422278773677596513663190353565865588483372725397212923981742009987661647786991949131613778315173152146793542498893279720082151064697074773586049426153876367175189591352564546267491922500562938542476274861870730407367398115128826010791970609450242421199883524848740816569805453033235823360600586876128399489013443859100540508953338410883530968822668732862989538886450886942011516822427215034029425199212617085573085941124849805816265377806259497210272290455299643342804491681305132764059310777751461134258100508064098568469168712198277551760392619339992510184010137121889998774134741447142753581993437613322916515743647979266796259846246672339694009686118710239303840972952169906801420098004144206856126315690700754799796941565361107602573841256797583005996205861463216159288113693908989677240457388183746469466514913092017838656012178670628067370302979704677792443750575268678795909941864727238757285381276781946702997071683875211381414988401825667447164877124135005584172901373621563707611699680112273319202141127331534328998309315056210402560939331256957997879571139136179511121448775262486019908026423019039688046854373174657373632851703119051279026419107758569875282215161854743720579155798078486750961020411395097756227176881672844716161636449725427920674579561409597112717354202670575410505608728782055378030623519245847255667445548467506119400811243372157137949154137079958149193307545988240936720568602823532949193355168436494194016826121591222370620859456977599701001374255486475464108223069190827844930652325408019213785398305781900377870031900378782587913725525573441347503464272674326580740316208704050278206156660047709460927860366793361910964013520026258657539507953329955976397066267904808300431313623397955968407729794888343069433634095272069350920957667826969437327602441516020706713336937711650625037056871417074665876046505871241635040616712597763255092654974539304295453689442298728054009703910860443578074795404170879822383494912734634296987402716542064983833788642271450714175858015489813032135602480535469560840014309421176257240642433673832174448181833301847932298181488687281531665054082874506203203313646642062487228303020587127931879648930263226577039494253982651256080222355501371693369246925954095308084358160005285240988425103529371394900720984197794268815864570304777140343729078411226594282389534586806950802034979480161910487938990224672698324501769784120507575384945369454084135888222976253016543455990984840101696957686843030260341965568142769717615063193962344730019583577484155296573549010756428544019225065830802565097428445493176861432751691495589897918063471685455019431985639014265602117040901131129551310264609022927342666519043939797922649870960698592325531611803746773359268557154509975801115210684583278535145537885779957169420684882539540076859756357807600032848487977236056721302922419646093121505913683276718189655544164557519372345655829135686986784665940797670697600310379578601687211329220172953339147075932605413641030510101843385416845438264204746257227019949616938117895871517019110046731154224706114669582893263814802988127882036045806669189025630780879044935962902107679266402790084064349501521003711391824826503997123364835107162074570651605336123961305538460300195840180327014825486510173574206830663895034219860292702372579983890100258042270946275034260232625226032195442735970499369951096760421018986695511313659751430035205967292442563019870048425315409650772199964288323233804251372968349645526874035300084888388980451460282874227712897388781760475504)
10 - 2 * 5
[1, 1, 1, 1].len
[1, 1, 1, 1].length
[1] * 5
([1] * 5).length
load("~/neg2.rb")
to_neg_bin_2([1] * 100000)
to_dec([1] * 100000)
to_dec([1] * 100 + [0] * 10000 + [1] * 10000 + [1, 0, 1, 1, 1, 1, 0, 0, 0, 1] + [0] * 90 + [1] * 700 + [0] * 100 + [1] * 79000)
def test
def test(n)
def test(a)
a == to_neg_bin_2(to_dec(a))
end
[1, 2,3 ] = [1, 2, 3]
[1, 2,3 ] == [1, 2, 3]
test([1] * 100 + [0] * 10000 + [1] * 10000 + [1, 0, 1, 1, 1, 1, 0, 0, 0, 1] + [0] * 90 + [1] * 700 + [0] * 100 + [1] * 79000)
